{% macro navbar(menu, options, renderer, config) %}
    <nav class="navbar">
        <div class="navbar-inner">
            {{ _self._menu(menu, options, renderer, config|default({})|merge({ 'type': 'navbar' })) }}
        </div>
    </nav>
{% endmacro %}

{% macro menu(menu, options, renderer, config) %}
    {{ _self._menu(menu, options, renderer, config|default({})|merge({ 'type': 'menu' })) }}
{% endmacro %}

{% macro side(menu, options, renderer, config) %}
    <nav class="sidebar-nav">
        {{ _self._menu(menu, options, renderer, config|default({})|merge({ 'type': 'list' })) }}
    </nav>
{% endmacro %}

{% macro tabs(menu, options, renderer, config) %}
    {{ _self._menu(menu, options, renderer, config|default({})|merge({ 'type': 'tabs' })) }}
{% endmacro %}

{% macro pills(menu, options, renderer, config) %}
    {{ _self._menu(menu, options, renderer, config|default({})|merge({ 'type': 'pills' })) }}
{% endmacro %}

{%- macro _menu(menu, options, renderer, config) -%}
    {% spaceless %}
        {#{% set config = config|default({}) %}#}
        {% set children_class = '' %}
        {% if config.class is defined %}
            {% set children_class = children_class ~ ' ' ~ config.class %}
        {% endif %}
        {% if config.type is defined %}
            {% set children_class = children_class  ~ ' ' ~  'nav nav-' ~ config.type %}
        {% endif %}
        {% set options = options|default([])|merge(
        {
        'currentClass': 'active',
        'currentAsLink': true,
        'allow_safe_labels': true,
        'template': 'ImaticViewBundle:Component:knp_menu.html.twig',
        'menu_class': children_class}
        ) %}
        {% if menu is iterable %}
            {{ imatic_view_menu_render_array(menu, options) }}
        {% else %}
            {{ knp_menu_render(menu, options, renderer) }}
        {% endif %}
    {% endspaceless %}
{%- endmacro -%}
